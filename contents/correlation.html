<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>さまざまな統計量</title>
    <meta name="description" content="Javascriptとp5.jsを用いたアニメーションで統計学習をサポートします。" />
  <!-- ===== 数式表示ライブラリ ===== -->
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
  <!-- ===== jStat ライブラリ ===== -->
    <script src="https://cdn.jsdelivr.net/npm/jStat@1.8.6/dist/jstat.min.js"></script>
  <!-- ===== p5.js ライブラリ ===== -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.9.4/p5.min.js"></script>
  <!-- ===== スタイルシート初期化 ===== -->
    <link rel="stylesheet" href="https://unpkg.com/ress/dist/ress.min.css" />
    <link rel="stylesheet" href="css/contents_style.css">
  </head>

  <body>
    <div class="page_header">
      <h1>【さまざまな統計量】相関係数とその予想</h1>
      <ul class="main_navigation">
        <li class="main_menu" id="learning">解　　説</li>
        <li class="main_menu" id="usage">使用方法</li>
        <li class="main_menu" id="lesson">学習課題</li>
        <li class="main_menu" id="exit">終　　了</li>
      </ul>
    </div>
    <main>
    <!-- ==================================== -->
      <article id="learning_contents" class="article_contents">
        <h2>〈解説〉相関係数</h2>
        <h3>相関係数</h3>
        <p>対応のある2つの量的変数\(X\)と\(Y\)があるとき、2つの変数の間に<strong>直線的な関連</strong>があるかどうかを検討するための指標が相関係数です。各データの偏差をXY平面上にプロットしたとき、プロットがおおむね右上がりであれば、\(X\)の値が大きい時に\(Y\)の値も大きい傾向にあるといえます。これを「正の相関がある」といい、相関係数は正の値をとります。逆に、右下がりであれば、\(X\)の値が大きい（小さい）時に、\(Y\)の値は小さい（大きい）傾向にあることといえます。これを「負の相関がある」といい、相関係数は負の値をとります。どちらともいえない（はっきりした傾向がみられない）とき、「相関がない」、「無相関である」といい、相関係数は0に近い値をとります。</p>
        <h3>相関係数の解釈</h3>
        <p>相関係数は、2つの量的変数に「直線的な関連」があるかどうかを見るための指標です。したがって、2つの変数が2次関数的な関連をもつとき（たとえばプロットが放物線を描くようなとき）は、相関係数は適切な指標ではありません。<br />また、相関係数は標本サイズが大きい時、有意になりやすい指標です。外れ値の影響も強く受けます。相関係数が有意であることや、相関係数の絶対値が大きいことは、「2つの変数の直線的な関連の強さ」を直接的に示すものではありません。データのプロットをよく観察することが重要です。</p>
      </article>
    <!-- ==================================== -->
      <article id="usage_contents" class="article_contents">
        <h2>〈使用方法〉相関係数の予想</h2>
        <h3>データのプロット</h3>
        <p><span class="term">標本サイズ</span>を指定して、<span class="button">プロット描画</span>をクリックすると、乱数で生成したデータをXY平面上にプロットします。プロットの配置だけを見て、相関係数を予測しましょう。</p>
        <h3>丸め処理</h3>
        <p>乱数で生成されたデータは、小数点以下10桁ほどの実数です。これを、四捨五入によって、整数あるいは小数1桁（2桁）に丸めるかどうかを指定します。</p>
        <h3>相関係数の予想</h3>
        <p>データをプロットすると、<span class="term">相関係数の予想</span>をすることができます。<span class="button">判定</span>をクリックすると正解（小数点3桁に丸めています）を表示します。ただし、正誤判定はしていません。プロットの見た目から相関係数を予想することは意外に難しい、ということを実感してください。</p>
        <h3>外れ値の指定</h3>
        <p>外れ値を除外した相関係数が計算できます。正解表示後に、除外したいデータ点をクリックします。データ点が赤く表示され、そのデータを除外した場合の関係数を表示します。除外できるデータ点は1つだけです。</p>
      </article>
    <!-- ==================================== -->
      <article id="lesson_contents" class="article_contents">
        <h2>〈学習課題〉相関係数の予想</h2>
        <ol>
          <li>標本サイズが小さい時（例えばn=10）と、やや大きい時（例えばn=50）とでは、相関係数の予想のしやすさに違いがありますか。違いがあるとしたら、どのように違いますか。また、なぜそのような違いが出ると思いますか。</li>
          <li>判定のあとに表示される統計情報をつかって、相関係数を計算し、表示されている相関係数と一致するか試してみましょう。（統計情報は小数3桁に丸められています。丸め誤差に注意してください。）</li>
          <li>相関係数は外れ値に影響されやすい指標ですが、それはなぜですか。プロットの見た目、あるいは、計算式をもとに説明してみましょう。</li>
          <li>表示されている統計情報の「分散」および「共分散」は、標本サイズnで割った値（通称「標本分散」）です。一方、提供しているスクリプトでRが計算する「分散」および「共分散」は、(n-1)で割った値です。どちらを用いるかによって、相関係数は変わるのでしょうか。それはなぜでしょうか。お使いの教科書に掲載されている計算式をもとに考えましょう。</li>
        </ol>
      </article>
    <!-- ==================================== -->
      <article>
        <h2>予想と判定</h2>
        <div id="settings">
          <p class="user_setting">
            <strong>標本サイズ</strong>
            <input class="number" id="sample_size" type="number" value="30" min="10" max="100" step="10" /><span id="sample_size_interval"></span>
<!--            <strong>丸め処理</strong>
            <select id="deci_option">
              <option selected value="-1">しない</option>
              <option value="0">整数</option>
              <option value="1">小数1桁</option>
              <option value="2">小数2桁</option>
            </select> &nbsp; -->
            <input class="button" id="btn_draw" type="button" value="プロット描画" />
          </p>
          <p id="estimate" class="user_setting" style="display:none;">
            <strong>相関係数の予想</strong>
            <input class="number" id="user_correl" type="number" value="0" step="0.01" min="-1" max="1" /><span id="user_correl_interval"></span>
            <input class="button" id="btn_judge" type="button" value="判定" />
            <input class="button" id="btn_reset" type="button" value="リセット" />
            <p id="aboud_testmode"></p>
          </p>
        </div>
      </article>
      <div id="p5"><!-- ===== 自作ライブラリの読み込みはここで ===== -->
        <script src="scripts/correlation.js"></script>
        <script src="js/contents.js"></script>
      </div>
      <div id="download" style="display:none;">
        <p>ボタンをクリックすると、各種データのダウンロードができます。</p><p>
        <input class="button data_download" type="button" id="raw_data" value="ローデータ" />&nbsp;
        <input class="button data_download" type="button" id="stats_data" value="統計データ" />&nbsp;
        <input class="button data_download" type="button" id="script" value="R スクリプト" /></p>
      </div>
    </main>
  </body>
</html>

